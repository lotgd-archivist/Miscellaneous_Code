
<?php/*Neues Feature zum Neubeginn für Spieler mit vielen DK's -Alternative zum Schrein der ErneuerungErstellt von Trillian - 6.11.2004 - für www.the-addicted.de/~spite/logdDatenbank-Ergänzungen:ALTER TABLE accounts ADD herotattoo int(4) NOT NULL default '0';Änderungen in common.php:vor der Zeile :$beta = (getsetting("beta",0) == 1 || $session['user']['beta']==1);folgendes einfügen: $ghosts = array(1=>"Schlange",2=>"Fuchs",3=>"Eber",4=>"Adler",5=>"Wolf",6=>"Pferd");an passender Stelle: addnav("befestigtes Lager","herocamp.php");Änderungen in hof.php:Vor: addnav("Bestenlisten");folgendes einfügen:addnav("Wahre Helden");addnav("Helden mit dem Segen der Tiergeister","hof.php?op=ghosts&subop=$subop&page=$page");Vor:} elseif ($_GET[op] == "gems") {folgendes einfügen:} elseif ($_GET[op] == "ghosts") {    $sql = "SELECT name,herotattoo as data1 FROM accounts WHERE locked=0 and herotattoo>0 ORDER BY herotattoo $order, dragonkills $order, level $order, acctid $order LIMIT $limit";    if ($_GET[subop] == "least") $adverb = "geringsten";    else $adverb = "stärksten";    $title = "Die Krieger mit dem $adverb Segen der Tiergeister";    $headers = array("Tätowierungen");    display_table($title, $sql,false,false,$headers,false);Änderungen in dragon.php:Vor ,"avatar"=>1 (taucht zweimal auf)jeweils: ,"herotattoo"=>1 einfügenVor while(list($key,$val)=each($session[user][dragonpoints])){folgendes einfügen:    $session[user][attack]+=$session[user][herotattoo];    $session[user][defence]+=$session[user][herotattoo];Änderungen in bio.php:Die Zeile: $result = db_query("SELECT login,name,level,sex,... um herotattoo erweiternNach : output ("`^Bester Angriff: `@$row[punch]`n");folgendes einfügen:if ($row[herotattoo]) {    output("`^Tätowierungen: ");    for($i=1; $i<=$row[herotattoo];$i++){        output("`@$ghosts[$i]");        if ($i<$row[herotattoo]) output(", ");        else output(".`n");    }}*/require_once "common.php";require_once "func/systemmail.php";require_once "func/titles.php";require_once "func/tattoos.php";addcommentary();checkday();page_header("Heldenlager");$drunkenness = array(-1=>"absolut nüchtern",                                                         0=>"ziemlich nüchtern",                                                         1=>"kaum berauscht",                                                          2=>"leicht berauscht",                                                         3=>"angetrunken",                                                         4=>"leicht betrunken",                                                         5=>"betrunken",                                                         6=>"ordentlich betrunken",                                                         7=>"besoffen",                                                         8=>"richtig zugedröhnt",                                                         9=>"fast bewusstlos"                                    );                $drunk = round($session[user][drunkenness]/10-.5,0);$cost = array("ale"=>$session['user']['level']*10,"beer"=>$session['user']['level']*15,        "fire"=>$session['user']['level']*35,"death"=>$session['user']['level']*50);$drunkinc = array("ale"=>33,"beer"=>40,"fire"=>50,"death"=>75);if ($_GET["op"]=="enter"){    output("`c`b`tDas Lager der Helden`b`c`n`n");    output("`_Als d`§u das `ßLage`´r betr`ßitts`§t, sie`_hst du e`§ine k`ßleine `´Gruppe von Wesen u`ßnte`§rsch`_iedli`§cher R`ßassen um ");    output("`´ein Lagerfeuer h`ßerum `§sitzen`n");    if ($session['user']['herotattoo'] || $session['user']['acctid']==14256) {        output("`_Als di`§e ver`ßsamme`´lten Helden di`ßch bemer`§ken, g`_rüßen s`§ie dir f`ßreun`´dlich zu `ßund bi`§eten`_ dir e`§inen ");        output("`ßPlat`´z am Feu`ßer an.`n");        output("`§Du bis`_t dir n`§och ni`ßcht g`´anz sicher`ß, ob du `§dich z`_u ihne`§n setz`ßen will`´st, ode`ßr li`§eber`_ ers`§t etw`ßas ");        output("zu t`´rinke`ßn bes`§org`_en w`§il`ßlst.`n");        output("Vi`´elleic`ßht wil`§lst du`_ aber a`§uch de`ßm Zelt d`´es Tä`ßtowie`§rers e`_inen`§ Bes`ßuch a`´bsta`ßtt`§en.`0");        addnav("Ans Feuer setzen","herocamp.php?op=talk");        addnav("Zur wandelnden Schenke","herocamp.php?op=drink");        if ($session['user']['herotattoo']) addnav("Tätowiererzelt","herocamp.php?op=tattoo");    } else {        output("Dort sitzen gleichermaßen Männer und Frauen, einige von ihnen hast du bereits in der Stadt gesehen, ");        output("von anderen nur in Legenden gehört. Dies sind alles wahre Helden, und als du sie betrachtest, ");        output("bemerkst du bei vielen von ihnen eine Tätowierung in Form einer Schlange.`n");        output("Als dich einer von ihnen bemerkt, und deinen staunenden Blick bemerkt, zeigt er auf ein kleines Zelt ");        output("am Rande des Lagers.`0`n");        addnav("Zum Zelt gehen","herocamp.php?op=tattoo");    }    addnav("Lager verlassen","herocamp.php?op=leave");} else if ($_GET["op"]=="leave") {    output("`QDu verlässt das Lager der Helden und kehrst in die Stadt zurück.`0`n");    addnav("Weiter","village.php");} else if ($_GET["op"]=="talk") {    output("`c`b`ÀL`°ag`Qe`qrf`qe`Qu`°e`Àr`b`c`n`n");    output("`ÀDei`°n Bl`Qick `qschweif`Qt um`°her `Àund `°erh`Qasc`qht e`Qini`°ge a`Ànde`°re H`Qelde`qn, we`Qlch`°e es s`Qich`q um e`Qin L`°age`Àrfe`°uer b`Qequ`qem ge`Qmach`°t hab`Àen. Da`°s Feu`Qer i`qn der`Q Mit`°te wi`Àrft l`°ode`Qrnd`qe Fl`Qamm`°en, d`Àie ei`°n zar`Qtes `qLich`Qt we`°rfe`Àn, da`°s Kni`Qste`qrn de`Qs ver`°bre`Ànne`°nden`Q Geä`qsts u`Qnter`°bric`Àht san`°ft di`Qe Sti`qlle u`Qnd de`°r Duf`Àt de`°s sei`Qchte`qn Rauc`Qhes s`°teigt`À dir i`°n di`Qe Na`qse. D`Qie Bl`°icke `Àder H`°elde`Qn fal`qlen na`Qch un`°d nac`Àh au`°f dich`Q. Ein`qe pas`Qsend`°e Gel`Àege`°nhei`Qt, si`qch üb`Qer di`°e jü`Àngs`°ten `QTate`qn au`Qszu`°tau`Àsch`°en.`0`n`n");    viewcommentary("herocamp","Geschichten erzählen",30,"erzählt",1,1);    addnav("Lagerfeuer verlassen","herocamp.php?op=enter");} else if ($_GET["op"]=="drink") {    output("`c`b`wZ`6u`Kr`ú w`*a`Èn`{d`Èe`*ln`*d`Èe`{n S`Èc`*h`úe`Kn`6k`we`b`c`n`n");    output("`wDu`6 wa`Knd`úer`*st `Èla`{ng`Èsa`*m h`úin`Küb`6er`w zu `6Kh`Kal`úed,`* de`Èr u`{nt`Èer `*ei`úne`Km s`6ch`wie`6f h`Kän`úge`*nd`Èen `{Ze`Èlt`*da`úch`K me`6hr`wer`6e F`Käs`úse`*r a`Èuf`{ge`Èst`*el`últ ");    output("`Kha`6t, u`wnd `6ge`Kra`úde`* da`Èbe`{i i`Èst`*, ei`úni`Kge `6Gl`wäs`6er`K zu`ú sp`*ül`Èen.`{ Üb`Èer`* ih`úm h`Kän`6gt`w ei`6n S`Kch`úil`*d m`Èit`{de`Èm h`*oc`úht`Kra`6be`wnd`6en`K Na`úmen `n`n");    output("`wZ`6u`Kr`ú w`*a`Èn`{d`Èe`*ln`*d`Èe`{n S`Èc`*h`úe`Kn`6k`we`n`n");    output("`6Als`K Kha`úled `*dic`Èh be`{mer`Èkt, `*sch`úaut`K er i`6n d`wein`6e Ri`Kcht`úung`* und `Èfra`{gt`È:`n");    output("`ÈNa, was kann ich heute für dich tun? Und bevor du fragst, ja ich bin mit Khalid verwandt...`n`n`0");    if ($drunkenness[$drunk]){        output("`n`n`7Du fühlst dich ".$drunkenness[$drunk]."`n`n");    }else{        output("`n`n`7Du fühlst dich nicht mehr.`n`n");    }    /*    output("<a href='herocamp.php?op=drink2&choice=ale'>Ich nehme nur ein Ale</a>`n",true);    output("<a href='herocamp.php?op=drink2&choice=beer'>Gib mir ein zwergisches Starkbier</a>`n",true);    output("<a href='herocamp.php?op=drink2&choice=fire'>Ich will ein Glas Höllenfeuer</a>`n",true);    output("<a href='herocamp.php?op=drink2&choice=death'>Ich wähle den flüssigen Tod</a>`n",true);    addnav("","herocamp.php?op=drink2&choice=ale");    addnav("","herocamp.php?op=drink2&choice=beer");    addnav("","herocamp.php?op=drink2&choice=fire");    addnav("","herocamp.php?op=drink2&choice=death");    */    output("`7Nur hier können sich echte Helden über ihre Erlebnisse unterhalten!`n`n");        viewcommentary("hero_inn","Zur Unterhaltung beitragen:",25,"sagt",1,1);    addnav("Ale - ".$cost["ale"],"herocamp.php?op=drink2&choice=ale");    addnav("Starkbier - ".$cost["beer"],"herocamp.php?op=drink2&choice=beer");    addnav("Höllenfeuer - ".$cost["fire"],"herocamp.php?op=drink2&choice=fire");    addnav("flüssiger Tod - ".$cost["death"],"herocamp.php?op=drink2&choice=death");    addnav("Zurück zum Platz","herocamp.php?op=enter");} else if ($_GET["op"]=="drink2"){    if (!$_GET["choice"]) redirect("herocamp.php?op=drink");    $choice = $_GET["choice"];    if ($session['user']['gold']<$cost[$choice]) {        output("`%Khaled schaut dich wütend an `5Bestell dir nichts, was du nicht auch bezahlen kannst!`n");        output("`%Er schaut dich noch eine Weile finster an, bevor er sich wieder seinen Gläsern zuwendet.`0");    } else if ($session['user']['drunkenness']+$drunkinc[$choice]>=100){        output("`%Khaled lächelt dich müde an, und sagt, dass du das heute sicher nicht mehr vertragen wirst, ");        output("und du lieber etwas schwächeres versuchen solltest ... Vielleicht ein Glas `&Milch`0");    } else {        $session[user][gold]-=$cost[$choice];        $session[user][drunkenness]+=$drunkinc[$choice];        if ($choice=="ale") {            output("Khaled nimmt ein Glas und schenkt schäumendes Ale aus einem angezapften Fass hinter ihm ein.  ");            output("Er gibt dem Glas Schwung und es rutscht über die improvisierte Theke, wo du es mit deinen Kriegerreflexen fängst.  ");            output("`n`nDu drehst dich um, trinkst dieses herzhafte Gesöff auf ex.`n`0");            switch(e_rand(1,3)){                  case 1:                case 2:                      output("`&Du fühlst dich gesund!");                    $session[user][hitpoints]+=round($session[user][maxhitpoints]*.1,0);                    break;                case 3:                    output("`&Du fühlst dich lebhaft!");                    $session[user][turns]++;            }            $session[bufflist][101] = array("name"=>"`#Rausch","rounds"=>10,"wearoff"=>"Dein Rausch verschwindet.","atkmod"=>1.25,"roundmsg"=>"Du hast einen ordentlichen Rausch am laufen.","activate"=>"offense");        } else if ($choice=="beer") {            output("Khaled nimmt ein Glas und füllt es mit dunklem zwergischen Starkbier aus einem Fass rechts neben ihm .  ");            output("Er gibt dem Glas Schwung und es rutscht über die improvisierte Theke, wo du es mit deinen Kriegerreflexen fängst.  ");            output("`n`nDu drehst dich um, trinkst dieses starke Gesöff in einem langen Zug.`n`0");            switch(e_rand(1,3)){                  case 1:                case 2:                      output("`&Du fühlst dich gesund!");                    $session[user][hitpoints]+=round($session[user][maxhitpoints]*.15,0);                    break;                case 3:                    output("`&Du fühlst dich lebhaft!");                    $session[user][turns]++;            }            $session[bufflist][101] = array("name"=>"`#Rausch","rounds"=>15,"wearoff"=>"Dein Rausch verschwindet.","atkmod"=>1.3,"roundmsg"=>"Du hast einen ordentlichen Rausch am laufen.","activate"=>"offense");        } else if ($choice=="fire") {            output("Khaled nimmt ein Glas, geht zu einem kleinen Fass an seiner rechten Seite, und fült es vorsichtig ");            output("mit einer klaren Flüssigkeit. Er schiebt dir das Glas behutsam über die improvisierte Theke.`n");            output("Du atmest kurz durch, und stürzst den Inhalt des Glases anschließend in einem Zuge herunter.`n");            switch(e_rand(1,7)){                case 1:                case 2:                case 3:                    output("`&Du fühlst dich gesund!");                    $session[user][hitpoints]+=round($session[user][maxhitpoints]*.2,0);                    $session[bufflist][101] = array("name"=>"`#schwerer Rausch","rounds"=>20,"wearoff"=>"Dein Rausch verschwindet.","atkmod"=>1.35,"roundmsg"=>"Du hast einen ordentlichen Rausch am laufen.","activate"=>"offense");                    break;                case 4:                    $session['user']['turns']++;                case 5:                case 6:                    output("`&Du fühlst dich lebhaft!");                    $session[user][turns]++;                    $session[bufflist][101] = array("name"=>"`#schwerer Rausch","rounds"=>20,"wearoff"=>"Dein Rausch verschwindet.","atkmod"=>1.35,"roundmsg"=>"Du hast einen ordentlichen Rausch am laufen.","activate"=>"offense");                    break;                case 7:                    output("`&Du fühlst dich gar nicht gut!");                    $session[user][turns]--;                    $session[user][hitpoints]-=round($session[user][maxhitpoints]*.2,0);                    if ($session[user][hitpoints]<1) $session[user][hitpoints]=1;                    $session[bufflist][101] = array("name"=>"`4übler `#Rausch","rounds"=>20,"wearoff"=>"Dein Rausch verschwindet.","atkmod"=>0.8,"roundmsg"=>"Du bist völlig berauscht.","activate"=>"offense");             }        }else {            output("Khaled nimmt ein Glas, stellt es auf den Tresen und holt vorisichtig eine dunkle Flasche unter ");            output("mit einer klaren Flüssigkeit. Er schiebt dir das Glas behutsam über die improvisierte Theke.`n");            output("der Theke hervor. Langsam lässt er eine rötliche Flüssigkeit in das Glas laufen .`n");            output("Als er die Flasche absetzt läuft ein einzelner Tropfen die Flasche herab, und als er die ");            output("Holzplatte der Theke berührt kräuselt sich eine kleine Rauchfahne in die Höhe.`n");            output("Du schluckst einmal kurz, aber jetzt gibt es kein Zurück mehr, willst du nicht dein Gesicht ");            output("verlieren. Du nimmst deinen Mut zusammen, ergreifst das Glas und leerst es so schnell du nur kannst.`n");            switch(e_rand(1,7)){                case 1:                case 2:                case 3:                    output("`&Du fühlst dich gesund!");                    $session[user][hitpoints]+=round($session[user][maxhitpoints]*.25,0);                    $session[bufflist][101] = array("name"=>"`#schwerer Rausch","rounds"=>25,"wearoff"=>"Dein Rausch verschwindet.","atkmod"=>1.4,"roundmsg"=>"Du hast einen ordentlichen Rausch am laufen.","activate"=>"offense");                    break;                case 4:                    $session['user']['turns']++;                case 5:                    $session['user']['turns']++;                case 6:                case 7:                    output("`&Du fühlst dich lebhaft!");                    $session[user][turns]++;                    $session[bufflist][101] = array("name"=>"`#schwerer Rausch","rounds"=>25,"wearoff"=>"Dein Rausch verschwindet.","atkmod"=>1.4,"roundmsg"=>"Du hast einen ordentlichen Rausch am laufen.","activate"=>"offense");                    break;                case 8:                case 9:                case 10:                    output("`&Du fühlst dich gar nicht gut!");                    $session[user][turns]--;                    $session[user][hitpoints]-=round($session[user][maxhitpoints]*.25,0);                    if ($session[user][hitpoints]<1) $session[user][hitpoints]=1;                    $session[bufflist][101] = array("name"=>"`4übler `#Rausch","rounds"=>25,"wearoff"=>"Dein Rausch verschwindet.","atkmod"=>0.7,"roundmsg"=>"Du bist völlig berauscht.","activate"=>"offense");                    break;                case 11:                    output("`&Du fühlst dich absolut elend!");                    $session[user][turns]=0;                    $session[user][hitpoints]=1;                    $session[bufflist][101] = array("name"=>"`4übler `#Rausch","rounds"=>35,"wearoff"=>"Dein Rausch verschwindet.","atkmod"=>0.3,"roundmsg"=>"Dein Rausch lässt dich deinen Gegner kaum sehen.","activate"=>"offense");                    break;                case 12:                    output("`&Du fühlst dich `4TOT!`nDu verlierst dein gesamtes Gold und 10% deiner Erfahrung.`0");                    $session[user][alive]=false;                    $session[user][hitpoints]=0;                    $session[user][gold]=0;                    $session[user][experience]*=0.9;                    addnews($session[user][name]." verkraftete den flüssigen Tod nicht.");                    addnav("Zu den News","news.php");             }        }    }    if ($session[user][alive]) addnav("Zurück","herocamp.php?op=drink");} else if ($_GET["op"]=="tattoo") {    output("`c`b`VDas Zelt des Tätowierers`b`c`n`n");    output("`9Du betrittst das Zelt am Rande des Platzes, und schaust dich im Inneren um. Du siehst viele Kisten ");    output("gefüllt mit fremdartigen Fläschchen und Dosen. Auf einem Tisch stehen in einem Gestell einige Nadeln. ");    output("Hinter dem Tisch siehst du einen alten Mann sitzen, der bei deinem Eintreten den Kopf hebt.");    if ($session[user][herotattoo]){        output("`n`#Ah, willkommen zurück mein".($session[user][sex]?"e Tochter":" Sohn")."`#, lass mich deine ");        output("Tätowierungen sehen. Hm, ja die sehen gut verheilt aus.`n");        if(($session[user][dragonkills]>=30+$session[user][herotattoo]*10) || ($session[user][herotattoo]>=20 && $session[user][dragonkills]>=200)){            output("Wenn du willst, könnte ich dir eine weitere Tätowierung stechen.");            addnav("Tätowieren lassen","herocamp.php?op=maketattoo");        } else {            output("Aber leider hast du dir noch keine weitere Tätowierung verdient.");            addnav("Geschichte hören","herocamp.php?op=story");        }    } else {        if ($session[user][dragonkills]>=30+$session[user][herotattoo]*10) {            output("`n`#Ah, willkommen mein".($session[user][sex]?"e Tochter":" Sohn")."`#, ich habe dich bereits ");            output("erwartet. Tritt doch ein, und lass mich dir eine Geschichte erzählen.`n");            output("Vor langer Zeit lebten in diesem Wald die Tiergeister, sozusagen die Prototypen der Tiere die ");            output("wir heute kennen, zu jeder Tierart gab es damals einen Geist, aber es gab auch andere Geister ");            output("deren Tierarten schon lange ausgestorben sind. Mit dem Auftauchen der humanoiden Rassen verschwanden ");            output("die Tiergeister, aber hier in diesem Wald kann man ihre Kraft immernoch spüren, auch wenn sie schon ");            output("lange nicht mehr hier sind. Die Tiergeister schenken jenen ihre Gunst, die sich durch große Taten ");            output("verdient gemacht haben, und doch bereit sind, von neuem zu beginnen.`n");            output("Die Verbundenheit zu den Tiergeistern wird durch magische Tätowierungen besiegelt, du hast draußen ");            output("vielleicht schon einige davon gesehen. Die Kunst, diese Tätowierungen anzufertigen wird in meiner ");            output("Familie von Generation zu Generation weitergegeben.`n");            output("Du hast dir als Drachentöter einen großen Namen gemacht, ich könnte dir eine Tätowierung stechen, ");            output("falls du dies wünscht. Bedenke aber, dass du große Opfer dafür bringen musst, um den Segen der ");            output("Tiergeister zu empfangen. Auch all deine weltlichen Besitztümer wirst du opfern müssen.");            addnav("Tätowieren lassen","herocamp.php?op=maketattoo");        }else{            output("Der Mann schaut dich etwas verdutzt an. `3\"`#Wie bist du denn hier hereingekommen ?`3\" ");        }    }    addnav("Zurück","herocamp.php?op=enter");} else if ($_GET["op"]=="story") {            output("`n`#Ah, willkommen mein".($session[user][sex]?"e Tochter":" Sohn")."`#, ich habe dich bereits ");            output("erwartet. Tritt doch ein, und lass mich dir eine Geschichte erzählen.`n");            output("Vor langer Zeit lebten in diesem Wald die Tiergeister, sozusagen die Prototypen der Tiere die ");            output("wir heute kennen, zu jeder Tierart gab es damals einen Geist, aber es gab auch andere Geister ");            output("deren Tierarten schon lange ausgestorben sind. Mit dem Auftauchen der humanoiden Rassen verschwanden ");            output("die Tiergeister, aber hier in diesem Wald kann man ihre Kraft immernoch spüren, auch wenn sie schon ");            output("lange nicht mehr hier sind. Die Tiergeister schenken jenen ihre Gunst, die sich durch große Taten ");            output("verdient gemacht haben, und doch bereit sind, von neuem zu beginnen.`n");            output("Die Verbundenheit zu den Tiergeistern wird durch magische Tätowierungen besiegelt, du hast draußen ");            output("vielleicht schon einige davon gesehen. Die Kunst, diese Tätowierungen anzufertigen wird in meiner ");            output("Familie von Generation zu Generation weitergegeben.`n");            addnav("Zurück","herocamp.php?op=tattoo");} else if ($_GET["op"]==maketattoo) {    output("Bist du dir ganz sicher, dass du dir ein Tiergeist-Tattoo stechen lassen willst ?`n");    output("Du wirst wieder als ".($session[user][sex]?"Bauernmädchen":"Bauernjunge")." erwachen, nur mit deinen ");    output("Tätowierungen und deinen gesammelten Donation-Points.");    output("`n`n`@Es wird kein Zurück geben, also überlege dir gut ob du alles aufgeben und völlig von vorne anfangen möchtest.`@`n`n");    addnav("JA - ich bin bereit","herocamp.php?op=confirm");    addnav("NEIN - zurück zum Heldenlager","herocamp.php?op=enter");}else if ($_GET["op"]=="confirm") {    $session[user][herotattoo]++;    $ghost = $ghosts[$session[user][herotattoo]][0];    if ($ghost == "") $ghost="Drache";        addnews("`#".$session[user][name]."`# hat ".($session['user']['sex']?"ihrem":"seinem")." bisherigen Leben ein Ende gesetzt und einen Neuanfang beschlossen. Der Segen des/der ".$ghost." `#wird ".($session['user']['sex']?"sie":"ihn")." dafür ab nun begleiten");        if (!$session[user][ctitle]){            $n=$session[user][name];            $session[user][name]=($session[user][sex]?$titles['0']['1']:$titles['0']['0']).substr($n,strlen($session[user][title]));        }        $session[user][title]=($session[user][sex]?$titles['0']['1']:$titles['0']['0']);        $session[user][level]=1;        $session[user][maxhitpoints]=10;        $session[user][attack]=2+$session[user][herotattoo];        $session[user][defence]=2+$session[user][herotattoo];        $session[user][gold]=getsetting("newplayerstartgold",0);        $session[user][goldinbank]=0;        $session[user][experience]=0;        $session[user][gems]=0;        $session[user][age]=0;        $session[user][dragonpoints]="";        $session[user][dragonkills]=0;        $session[user][drunkenness]=0;        $session[user][specialty]=0;        $session[user][darkarts]=0;        $session[user][thievery]=0;        $session[user][magic]=0;        $session[user][weapon]="Fäuste";        $session[user][armor]="Lumpen";        $session[user][hashorse]=0;//        $session[user][petid]=0;        $session[user][bufflist]="";/*        if ($session[user][marriedto]>0 && $session[user][marriedto]<4294967295 && $session[user][charisma]==4294967295){            $sql="UPDATE accounts SET marriedto=0,charisma=0 WHERE acctid=".$session[user][marriedto]."";            db_query($sql);            systemmail($session[user][marriedto],"`6".$session[user][name]." ist nicht mehr der selbe`0","`6{$session['user']['name']}`6 hat sich ein neues Leben gegeben. Ihr seid nicht länger verheiratet.");        }        $session[user][charisma]=0;        $session[user][marriedto]=0;        $session[user][charm]=0;*/        $session[user][weaponvalue]=0;        $session[user][armorvalue]=0;        $session[user][resurrections]=0;        $session[user][weapondmg]=0;        $session[user][armordef]=0;        $session[user][race]=0;        $session[user][kunst]=0;        $session[user][gesinnung]=0;        $session[user][klasse]=0;        $session[user][dragonage]=0;        $session[user][deathpower]=0;        $session[user][punch]=1;        $session[user][stones]=0;        $session[user]['p38']=0;        $session['user']['gottjanein']='0';        $session['user']['gott']=0;        debuglog("REBIRTH ".date("Y-m-d H:i:s")."");        $session[user][bounty]=0;/*        if ($session[user][house]){            if ($session[user][housekey]){                $sql="UPDATE houses SET owner=0,status=3 WHERE owner=".$session[user][acctid]."";            }else{                $sql="UPDATE houses SET owner=0,status=4 WHERE owner=".$session[user][acctid]."";            }        db_query($sql);        }        $session[user][house]=0;        $session[user][housekey]=0;*//*$sql="UPDATE items SET owner=0 WHERE owner=".$session[user][acctid]."";        db_query($sql);*/        $sql="DELETE FROM items WHERE owner=".$session[user][acctid]." && class!='Schlüssel' && class!='Möbel' && class!='Haustiere'";        db_query($sql);//        $session[user][laston]="";        $session[user][lasthit]=date("Y-m-d H:i:s",strtotime("-".(86500/getsetting("daysperday",4))." seconds"));            $gesamttattoo=getsetting('tattoo_sum',0);            $gesamttattoo++;            savesetting('tattoo_sum',$gesamttattoo);        output("`n`6Du stimmst zu.`nNachdem der alte Mann dir ein Abbild einer/s ".$ghost." `6auf den Körper gestochen ");        output("hat, führt er dich zu einer Waldlichtung, auf der du deine gesamten Besitztümer ablegst.`n");        output("Du fühlst, wie dich langsam eine unbekannte Kraft durchstömt, aber gleichzeitig merkst du, wie ");        output("langsam deine Lebenskraft, deine Erfahrung und schließlich all deine Fähigkeiten ");        output("schwinden. Du vergisst dein ganzes bisheriges Leben. Du fällst in eine lange Ohnmacht...");        addnav("Zurück zur Stadt","village.php");} else {    output("`c`b`îH`_e`§l`ßd`´enl`ßa`§g`_e`îr`b`c`n`n");    output("`_Al`§s d`ßu g`´emü`îtlich d`´ur`ßch`§ de`_n W`§al`ßd s`´pa`îziers`´t, e`ßrb`§li`_ck`§st `ßdu `´ei`înen Rin`´g au`ßs Ba`§ums`_täm`§men`ß, die`´ ein`îe hohe M`´aue`ßr");    output(" bi`§lde`_n. Du `§geh`ßst l`´ang`îsam an die`´ser `ßWan`§d en`_tlan`§g, un`ßd si`´ehst`î schließl`´ich`ß ein`§e Un`_ter`§bre`ßchu`´ng d`îer");    output(" Wand, of`´fen`ßsic`§htl`_ich `§ein `ßTor,`´ an d`îem dre`´i Hal`ßb-Or`§ks m`_it g`§roß`ßen Ä`´xten`î lehne`´n.`n");    output("Al`ßs si`§e di`_ch b`§eme`ßrke`´n, st`îell`´en s`ßie s`§ich`_ sof`§ort `ßauf`´rec`îht h`´in, g`ßrei`§fen`_ bed`§roh`ßlic`´h zu i`îhre`´n Äx`ßten`§ und ");    output("`_mus`§ter`ßn di`´ch mi`îsstra`´uisc`ßh.`n`n");    if ($session['user']['herotattoo'] || $session['user']['acctid']==14256){        output("`§Als `_du i`§hne`ßn de`´ine `îTätowi`´eru`ßng z`§eig`_st, m`§ach`ßen d`´ie H`îalb-Or`´ks s`ßofo`§rt r`_esp`§ekt`ßvol`´l Pla`îtz, und b`´itt`ßen d`§ich, ");        output("`_doc`§h ei`ßnzu`´tre`îten, un`´d di`ßch w`§ie z`_u Ha`§use`ß zu f`´ühl`îen.`n`0");        addnav("Heldenlager betreten","herocamp.php?op=enter");    } else if($session['user']['dragonkills']>=30){        output("`_Die `§Hal`ßb-Ork`´s mu`îstern di`´ch p`ßrüf`§end`_ von`§ Kop`ßf bi`´s Fu`îß, sch`´lie`ßßli`§ch s`_pri`§cht`ß ein`´er v`îon ihne`´n:`n");        output("`´Unse`ßre Me`§iste`_r sch`§on vi`ßel ha`´ben von `ßEuc`§h geh`_ört,`§ ihr g`ßroß`´er Dr`ßach`§ent`_öter`§, od`ßer? `n");        output("M`´eist`ßer wol`§len e`_uch `§ken`ßnen`´ler`ßnen, `§Ihr `_ein`§tre`ßten `´dür`ßft.`n");        output("M`§it d`_ies`§en Wo`ßrten`´, ma`ßche`§n di`_e Ha`§lb-`ßOrk`´s de`ßn We`§g zu`_m To`§r fr`ßei.`0`n");        addnav("Heldenlager betreten","herocamp.php?op=enter");    } else {        output("`_Die `§Hal`ßb-Ork`´s mu`îstern di`´ch p`ßrüf`§end`_ von`§ Kop`ßf bi`´s Fu`îß, sch`´lie`ßßli`§ch s`_pri`§cht`ß ein`´er v`îon ihne`´n: `n");        output("D`ßu mü`§sse`_n noc`§h me`ßhr l`´eis`îten, u`´m Au`ßfme`§rks`_amk`§eit `ßvon `´Mei`îster`´n zu`ß erl`§ang`_en.  ");        output("D`§u hi`ßer n`´ich`ît willk`´omm`ßen b`§ist`_. Du b`§ess`ßer g`´ehe`în, be`´vor w`ßir v`§ert`_reib`§en d`ßich`´.`n`n");        output("Nac`îh ei`´nem `ßkur`§zen `_Bli`§ck a`ßuf d`´ie s`îcha`ßrfe`´n Äx`§te d`_er Ha`§lb-O`ßrks`´ bes`îchließt d`´u, lie`ßber `§spä`_ter ");        output("`§wie`ßder`´zuk`îommen, w`´enn s`ßie v`§iel`_lei`§cht `ßent`´geg`îenkom`´men`ßder `§sin`_d ... `§Und `ßwen`´n du `îvielleic`´ht d`ßies`§e ");        output("my`_ste`§riö`ßsen `´Mei`îster au`´sre`ßich`§end `_bee`§ind`ßruc`´kt ha`îst ... wod`´urc`ßh auc`§h im`_mer`ß ...`0");    }    addnav("Z?Zurück in den Wald","forest.php");    addnav("u?Zurück zur Stadt","village.php");}page_footer();

