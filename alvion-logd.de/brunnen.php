
<?php/* SQL:ALTER TABLE accounts        ADD `brunnen_used` enum('0','1') NOT NULL default '0',        ADD `brunnen_drink` enum('0','1') NOT NULL default '0';PHP:öffne newday.phpsuche:                $session['user']['seendragon'] = 0;füge danach ein:                $session['user']['brunnen_used']=false;                $session['user']['brunnen_drink']=false;dann noch den Brunnen verlinken zB. in der village.php        if (@file_exists("brunnen.php")) addnav("B?verzauberter Brunnen","brunnen.php");und die brunnen.php in den logd-Ordner kopieren --- fertig!*/require_once "common.php";addcommentary();checkday();page_header("Der verzauberte Brunnen");$session['user']['standort']="Verzauberter Brunnen";// $session['user']['brunnen_used']=false;if ($_GET[op]==""){        output("`c`b`úD`6er `óve`írz`Oau`_ber`Ote `íBr`óun`6ne`ún`b`c`n");        output("`úDu näher`6st dich d`óem verza`íuberte`On Brunne`_n. Viele G`Oerücht`íe hast du s`óchon über i`6hn gehört. N`úach den A`6ussagen ei`óniger Dorf`íbewohne`Or soll se`_in Wasse`Or heilen`íde Kräfte b`óesitzen, a`6ndere ber`úichteten ü`6ber Gol`ód und Edel`ísteine, we`Olche sie i`_n seiner Näh`Oe fande`ín. Selbst G`óerüchte ü`6ber eine F`úee, welch`6e den Br`óunnen be`íwohnt, dran`Ogen an d`_eine Ohre`On.`n Was nu`ín? Wirst d`óu dein Gl`6ück herau`ús forder`6n?`n`n`n");        addnav("Wirf ein Goldstück hinein","brunnen.php?op=gold");        addnav("Wirf einen Edelstein hinein","brunnen.php?op=gem");        addnav("Trinke einen Schluck von dem Wasser","brunnen.php?op=drink");        addnav("Zurück in die Träumergasse", "traumer.php");//        addnav("Bete zur Brunnenfee","brunnen.php?op=gebet");        viewcommentary("brunnen","Hinzufügen",25,"sagt",1,1);/*        output("`n`n`7Farbcodes:`n");        $result = db_query("SELECT allowed, code FROM appoencode WHERE allowed='1'");        while ($row = db_fetch_assoc($result))        {                output("`$row[code]&#0096;$row[code]`0",true);        }*/}else if ($_GET[op]=="gold"){        if ($session[user][gold] > 0)        {                if ($session['user']['brunnen_used']!=true)                {                        $session['user']['brunnen_used']=true;                        $session[user][gold]--;                        $aktion=e_rand(0,10);                        if ($aktion==0)                        {                                $gold = e_rand($session[user][level]*100,$session[user][level]*500);                                if($gold>$session[user][gold]) $gold=$session[user][gold];                                $session[user][gold]-=$gold;                                output("`vEine erboste Fee kommt aus dem Wasser gesprungen und nörgelt `5Was fällt euch ein, mir etwas an den Kopf zu werfen? `v Sie schlägt dich mit ihrem Stab und vor Schreck fallen dir einige Goldstücke aus der Tasche`n`n`^Du verlierst `4$gold `^Goldstücke.");                        }                        else if ($aktion >0 && $aktion<7)                        {                                $gold = e_rand($session[user][level]*10,$session[user][level]*30);                                $session[user][gold]+=$gold;                                output("`vZunächst bist du enttäuscht, da anscheinend nichts passiert ist, und willst dich schon abwenden, doch dann siehst du auf dem Brunnenrand etwas glänzen. `n`n`^Du findest `4$gold `^Goldstücke.");                        }                        else if ($aktion >6 && $aktion<10)                        {                                $session[user][charm]++;                                output("`vZunächst bist du enttäuscht, da anscheinend nichts passiert ist, und willst dich schon abwenden, doch dann fühlst du, dass du schöner wirst. `n`n`^Du bekommst einen Charmepunkt.");                        }                        else if ($aktion==10)                        {                                $schoener = e_rand(2,5);                                $session[user][charm]+=$schoener;                                if ($session['user']['sex']==0 ) output("`^Das Wasser im Brunnen beginnt zu kräuseln und eine wunderschöne Fee steigt hinaus. Sie haucht dir einen Kuss auf die Wange `5Ich danke euch für die grosszügige Spende, edler Herr `vflüstert sie, bevor sie spurlos verschwindet.`n`n`^Du fühlst dich schöner und bekommst `4$schoener `^Charmepunkte");                                if ($session['user']['sex']==1 ) output("`^Das Wasser im Brunnen beginnt zu kräuseln und ein wunderschöner Brunnengeist steigt hinaus. Er haucht dir einen Kuss auf die Wange `5Ich danke euch für die grosszügige Spende, edle Dame `vflüstert er, bevor er spurlos verschwindet.`n`n`Du fühlst dich schöner und bekommst `4$schoener `^Charmepunkte");                        }                }                else if ($session['user']['brunnen_used']==true)                {                        output("`vDu hast heute schon Gold und Edelsteine in den Brunnen geworfen, du solltest deinen Reichtum besser für dich behalten!");                }        }        else if ($session[user][gold] <= 0)        {                output("`vDu solltest dir erst einmal etwas Gold verdienen, bevor du etwas in den Brunnen werfen kannst");        }        $op="";        addnav("B?Zurück zum Brunnen","brunnen.php");        addnav("Zurück in die Träumergasse", "traumer.php");}else if ($_GET[op]=="gem"){        if ($session[user][gems] > 0)        {                if ($session['user']['brunnen_used']!=true)                {                        $session['user']['brunnen_used']=true;                        $session[user][gems]--;                        $aktion=e_rand(0,10);                                if ($aktion==0)                                {                                        $session[user][gems]--;                                        if($session[user][gems]<0) $session[user][gems]=0;                                        output("`vEine erboste Fee kommt aus dem Wasser gesprungen und nörgelt `5Was fällt euch ein mir etwas an den Kopf zu werfen? `v Sie schlägt dich mit ihrem Stab und vor Schreck fällt dir ein Edelstein aus der Tasche`n");                                }                                else if ($aktion >0 && $aktion<7)                                {                                        $gem = e_rand(1,3);                                        $session[user][gems]+=$gem;                                        output("`vZunächst bist du enttäuscht, da anscheinend nichts passiert ist und willst dich schon abwenden, doch dann siehst du auf dem Brunnenrand etwas glitzern. `n`n`^Du findest `4$gem `^Edelsteine.");                                }                                else if ($aktion >6 && $aktion<10)                                {                                        $gem = e_rand(3,5);                                        $session[user][gems]+=$gem;                                        output("`vZunächst bist du enttäuscht, da anscheinend nichts passiert ist und willst dich schon abwenden, doch dann siehst du auf dem Brunnenrand etwas glitzern. `n`n`^Du findest `4$gem `^Edelsteine.");                                }                                else if ($aktion==10)                                {                                        $schoener = e_rand(3,10);                                        $session[user][charm]+=$schoener;                                if ($session['user']['sex']==0 ) output("`Das Wasser im Brunnen beginnt zu kräuseln und eine wunderschöne Fee steigt hinaus. Sie haucht dir einen Kuss auf die Wange `5Ich danke euch für die grosszügige Spende, edler Herr `vflüstert sie, bevor sie spurlos verschwindet.`n`n`4Du fühlst dich schöner und bekommst $schoener Charmepunkte");                                if ($session['user']['sex']==1 ) output("`Das Wasser im Brunnen beginnt zu kräuseln und ein wunderschöner Brunnengeist steigt hinaus. Er haucht dir einen Kuss auf die Wange `5Ich danke euch für die grosszügige, Spende edle Dame `vflüstert er, bevor er spurlos verschwindet.`n`n`4Du fühlst dich schöner und bekommst $schoener Charmepunkte");                                }                        }                else if ($session['user']['brunnen_used']==true)                {                        output("`vDu hast heute schon Gold und Edelsteine in den Brunnen geworfen, du solltest deinen Reichtum besser für dich behalten!");                }        }        else if ($session[user][gems] <= 0)        {                output("`vDu solltest dir erst einmal Edelsteine suchen, bevor du welche in den Brunnen werfen kannst");        }        $op="";        addnav("B?Zurück zum Brunnen","brunnen.php");        addnav("Zurück in die Träumergasse", "traumer.php");}else if ($_GET[op]=="drink"){        if ($session['user']['brunnen_drink']!=true)        {                if ($session[user][turns]>=1)                {                        $session['user']['brunnen_drink']=true;                        $aktion=e_rand(0,20);                        if ($aktion==0)                        {                                $session[user][hitpoints]=1;                                output("`vDu trinkst von dem Wasser und dir wird übel. Du hast fast deine ganzen Lebenspunkte verloren!`n`n");                        }                        if ($aktion==1)                        {                                $session[user][turns]=0;                                output("`vDu trinkst von dem Wasser und dir wird übel. Du verlierst alle deine Waldkämpfe! Du kannst morgen wieder in den Kampf ziehen!`n`n");                        }                        else if ($aktion >1 && $aktion<5)                        {                                $session[user][turns]--;                                output("`vDu trinkst von dem Wasser und dir wird übel. Du verlierst einen Waldkampf!`n`n");                        }                        else if ($aktion >4 && $aktion<8)                        {                                $session[user][turns]+=3;                                output("`vDu trinkst von dem Wasser und fühlst dich erfrischt. Du bekommst drei Waldkämpfe hinzu!`n`n");                        }                        else if ($aktion >7 && $aktion<10)                        {                                $session[user][hitpoints]=$session[user][maxhitpoints];                                output("`vDu trinkst von dem Wasser und fühlst dich gut. Du wurdest geheilt!`n`n");                        }                        else if ($aktion >9 && $aktion<11)                        {                                $session[user][maxhitpoints]++;                                output("`vDu trinkst von dem Wasser und fühlst dich stärker. Du bekommst einen permanenten Lebenspunkt hinzu!`n`n");                        }                        else if ($aktion >10 && $aktion<16)                        {                                output("`vDu trinkst von dem Wasser und spürst nichts Besonderes. Enttäuscht wendest du dich ab!`n`n");                        }                        else if ($aktion >15 && $aktion<20)                        {        $session[user][deathpower]+=25;                                output("`vDu trinkst von dem Wasser und spürst nichts Besonderes. Erst später wirst du fest stellen, dass Ramius dir 25 Gefallen bewilligt hat!`n`n");                        }                        else if ($aktion==20)                        {        $session[user][deathpower]+=100;                                output("`vDu trinkst von dem Wasser und spürst nichts Besonderes. Erst später wirst du fest stellen, dass Ramius dir 100 Gefallen bewilligt hat!`n`n");                        }//                        output ("`nGold: $gold, aktion: $aktion User: ".$session[user][gold]."`n Charme: ".$session[user][charm]."`n");                }                else if ($session['user']['turns']<=0)                {                        output("`vDu hast leider keine Runden mehr übrig!`n`n");                }        }        else if ($session['user']['brunnen_drink']==true)        {                output("`vDu hast heute schon von dem Wasser aus dem Brunnen getrunken!`n`n");        }        $op="";        addnav("B?Zurück zum Brunnen","brunnen.php");        addnav("Zurück in die Träumergasse", "traumer.php");}addnav("Zum Dorf","village.php");// viewcommentary("brunnen","Hinzufügen",25);page_footer();

