
<?php/**********************************                                **    Die Pilzfee (pilzfee.php)   **        Idee: Veskara           **    Programmierung: Linus       **   für alvion-logd.de/logd      **      im Dezember 2007          **                                ***********************************//*Bitte die Einbauhinweise in der pilzsuche.php beachten!*/require_once "common.php";global $session;page_header("Die Pilzfee");$sql="SELECT * FROM `pilze` WHERE `acctid`='".$session['user']['acctid']."'";$result=db_query($sql) or die(db_error(LINK));$row=db_fetch_assoc($result);switch($_GET['op']) {    case "":        // Hier der Begrüssungstext        $out="`%Du pf`rlücks`Rt dir`r eine`% der `rlecke`Rr aus`rsehen`%den Fr`rüchte`R von `reinem`% der `rviele`Rn Obs`rtbäum`%e. Do`rch ka`Rum wi`rllst `%du ei`rnen B`Rissen`r prob`%ieren`r, zerp`Rlatzt`r die `%Fruch`rt auf `Reinmal`r und `%zerfä`rllt i`Rn gli`rtzern`%den S`rtaub. ";        $out.="`RNachd`rem du`% den `rerste`Rn Sch`rrecke`%n übe`rrwund`Ren has`rt, öf`%fnest`r du d`Reine `rAugen`% und `rsiehst`R eine`r klei`%ne Fe`re auf`Rgereg`rt umh`%ersch`rwirre`Rn `&Hast du Pilze? Hast du Pilze für mich?`R frag`rt sie`% mit `rihrer`R gloc`rkenhe`%llen `rStimm`Re. `n`n`c<img src='./images/fee3.jpg'>`c`n`n";        if($row['hasel']>0 || $row['gift']>0 || $row['feigen']>0 || $row['hasen']>0 || $row['baum']>0 || $row['insekt']>0 || $row['leucht']>0 || $row['alvion']>0 || $row['goetter']>0 || $row['gold']>0){            $out.="`RSie f`rlatte`%rt um`r dich`R heru`rm her`%um `&Jaaa, du hast Pilze für mich.  `%ruf`rt sie`R aufg`reregt `&Gib mir deine Pilze und ich werde dich reich belohnen.`n";            addnav("Pilze geben","pilzfee.php?op=pilze");        } else {            $out.="`RSie f`rlatte`%rt um`r dich`R heru`rm un`%d ihr`r Gesi`Rcht ü`rberzie`%ht sic`rh mit`R eine`rm tra`%urige`rn Sch`Rleier`& Du hast keine Pilze für mich. Ich kann nichts für dich tun.`n";            $out.="`rIhre `%klein`ren Flü`Rgelch`ren tr`%agen `rsie h`Rinauf`r zur `%Krone`r des O`Rbstba`rumes `%und s`rie ve`Rrschw`rindet`% aus `rdeine`Rn Aug`ren";        }        break;    case "pilze":        $pilze = array(            1=>array("Haselröhrling","hasel"),            2=>array("Giftmorchel","gift"),            3=>array("Feigenfiesling","feigen"),            4=>array("Hasenschwämmchen","hasen"),            5=>array("Baumfungi","baum"),            6=>array("Insektentäubling","insekt"),            7=>array("Leuchtender Nachtpilz","leucht"),            8=>array("Alvionsteinpilz","alvion"),            9=>array("Götterwulstling","goetter"),            10=>array("Goldener Pilz","gold")        );        $out="`rDu ze`Rigst `rder F`%ee de`rine g`Resamm`relte `%Beute`r und k`Rannst`r gar `%nicht `rso sch`Rnell s`rchaue`%n, wie`r die `RFee s`rchon `%um di`re Pil`Rze her`rum sc`%hwirr`rt `&Gibst du sie mir? Gibst du sie mir? `rbitt`Ret si`re übe`%rschw`ringli`Rch und`% scha`rut di`Rch da`rbei m`Rit gr`roßen `%Augen`r an.  `RNun i`rst es`% an di`rr zu `Rentsc`rheide`%n von`r welc`Rhen Pi`rlzen `%du di`rch tr`Rennen `rmöcht`%est"; // Blabla ... blablabla .. :D        $out.="`n"; // noch mehr mehr Blabla? *rofl*        switch($_GET['act']){            case "verkauf":                $out="";                $alle=0;                $kristalle=0;                $sql="UPDATE `pilze` SET ";                for($i=1;$i<=10;$i++){                    if((int)$_POST[$pilze[$i]['1']]>(int)$row[$pilze[$i]['1']]) $_POST[$pilze[$i]['1']]=$row[$pilze[$i]['1']];                    if((int)$_POST[$pilze[$i]['1']]>0){                        $out.="Du gibst der Fee ".$_POST[$pilze[$i]['1']]." ".$pilze[$i]['0']."`n";                        $kristalle+=$_POST[$pilze[$i]['1']]*$i*2;                        $alle+=$_POST[$pilze[$i]['1']];                        $sql.="`".$pilze[$i]['1']."`=`".$pilze[$i]['1']."`-".((int)$_POST[$pilze[$i]['1']]).", ";                    }                }                $sql=substr($sql,0,strlen($sql)-2);                $sql.=" WHERE `acctid`='".$session['user']['acctid']."'";                if($alle>0){                    db_query($sql) or die(db_error(LINK));                    $session['user']['kristalle']+=$kristalle;                    $out.="`n`n";                    $out.="`n`n`rDu hast `^$alle `rPilze der Fee gegeben und sie gibt dir dafür `^$kristalle `rfunkelnde Alvionkristalle`n";                }else {                    $out.="`n`n`rDu kannst keine `rPilze eintauschen die du nicht besitzt`n";                }                break;            default:                          $out.='<table><form action="pilzfee.php?op=pilze&act=verkauf" method="POST">';                for($i=1;$i<=10;$i++){                                $out.='<tr><td>'.$pilze[$i]['0'].' '                            .'</td><td><input name="'.$pilze[$i]['1'].'" value="'.(int)$row[$pilze[$i]['1']].'" size="3" maxlength="5"</td><td>`& max. '.(int)$row[$pilze[$i]['1']].'</td> '                            .'</tr>';                        }                            $out.='<tr><td><input type="submit" class="button" value="Pilze der Fee geben"></td></tr></form></table>';                addnav("","pilzfee.php?op=pilze&act=verkauf");                break;        }}output($out,true);addnav("Zurück");addnav("Zum Obstgarten","obstgarten.php");page_footer();?>

