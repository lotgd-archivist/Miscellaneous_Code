
<?php// idea of gargamel @ www.rabenthal.de// PHP5-kompatiblität und diverse Fixes: Linus @ alvion-logd.deif (!isset($session)) exit();if ($_GET['ups']==""){     output("`nDu bist schon viele Male hier vorbeigezogen, um mit Monstern zu kämpfen,     aber du hast es noch nie vorher wahr genommen: Ein `6güldenes `^Glimmern`0 etwas abseits     des Weges. Sollte es sich um Gold handeln?`n     Zielstrebig gehst du zu der Stelle. Als du dort ankommst, wo du den Schein     gesehen hast, entdeckst du `7nichts außer einer alten Öllampe`0.`n`n     Sollte es eine optische Täuschung gewesen sein?`n`n     Als du die Lampe hochhebst, um sie näher zu untersuchen, fängt sie erneut an in     einem `6gelbgoldenen `^Licht`0 zu scheinen. Die bauchige Lampe hat einen sehr schönen     Verschluss an der Stelle, an der man das Lampenöl einfüllt. Plötzlich öffnet sich der     Verschluss und über der Lampe erscheint ein `@kleiner Waldgeist`0, der dich genauso     erschrocken anschaut wie du ihn.`n     Du bist nicht sicher, wie du reagieren sollst.`0");     //abschluss intro     addnav("Geist ansprechen","forest.php?ups=talk");     addnav("Lampe mitnehmen","forest.php?ups=take");     addnav("Geist wieder einschliessen","forest.php?ups=cage");     addnav("Zurück in den Wald","forest.php?ups=leave");     $session['user']['specialinc'] = "aladin.php";}else if ($_GET['ups']=="talk"){   // geist ansprechen     output("`nDu sprichst den `@Waldgeist`0 an und fragst, was er von dir will.`n     `@\"Du hast mich befreit und zum Dank werde ich Dir etwas von meiner Kraft     übertragen. Nachdem ich so lange eingeschlossen war, muss ich nur erstmal     überlegen, wie genau derZauberspruch lautet...\" `0antwortet der `@Waldgeist`0.     \"Na hoffentlich fällt es ihm ein\" denkst du. Du hast nämlich keine     Lust auf einen schiefgegangenen Zauber.`n`n     `@Der Waldgeist beginnt eine geheimnisvolle Formel zu sprechen.`0`n`n");     switch(e_rand(1,5)){          case 1:          output("Du beginnst zu zittern und fällst wie vom Blitz getroffen um.          Ständig siehst du den Schein der Lampe vor dir, was dich in nächster          Zeit etwas behindern wird.");          $session['bufflist']['aladin'] = array("name"=>"`@Blendung",                                                            "rounds"=>20,                                                            "wearoff"=>"Du kannst wieder klar sehen.",                                                            "atkmod"=>0.8,                                                            "roundmsg"=>"`#Du siehst den Gegner nicht richtig.",                                                            "activate"=>"offense");          break;          case 2:          output("Ohne ersichtlichen Grund fühlst du dich glücklich. Der goldene          Schein der Lampe gibt dir Kraft um echtes Gold im Kampf zu erbeuten.");          $session['bufflist']['aladin'] = array("name"=>"`^Kraft des Goldes",                                                            "rounds"=>30,                                                            "wearoff"=>"Dein Golddurst ist gestillt.",                                                            "atkmod"=>1.2,                                                            "roundmsg"=>"`#Du willst das Gold des Gegners!",                                                            "activate"=>"offense");          break;          case 3:          output("Neugierig stierst du noch eine Zeit auf den Waldgeist, aber es          tut sich nichts. Offenbar hat er den richtigen Zauberspruch vergessen.");          break;          case 4:          output("Wartend schaust du den Waldgeist an, ohne das etwas passiert. Dir          wird langweilig und du setzt deinen Weg fort. Dabei bemerkst du nicht, wie          dir eine goldene Aura folgt.");          $session['bufflist']['aladin'] = array("name"=>"`^Goldene Aura",                                                            "rounds"=>30,                                                            "wearoff"=>"Die goldene Aura wird schwächer und löst sich auf.",                                                            "atkmod"=>1.1,                                                            "minioncount"=>1,                                                            "minbadguydamage"=>1,                                                            "maxbadguydamage"=>10,                                                            "effectmsg"=>"Die goldene Aura schlägt zu!",                                                            "activate"=>"offense");          break;          case 5:          output("Als nichts weiter passiert, verlässt du enttäuscht den Waldgeist.          Hinter deinem Rücken probiert der Geist einen zweiten Zauberspruch und ist          diesmal erfolgreich.");          $session['bufflist']['aladin'] = array("name"=>"`@Waldgeist-Zauber",                                                            "rounds"=>10,                                                            "wearoff"=>"Der Geist verflüchtigt sich.",                                                            "atkmod"=>1.3,                                                            "minioncount"=>1,                                                            "mingoodguydamage"=>1,                                                            "maxgoodguydamage"=>$session['user']['level'],                                                            "effectmsg"=>"Der Waldgeist kämpft mit Dir!",                                                            "activate"=>"roundstart");          break;     }     $session['user']['specialinc']="";}else if ($_GET['ups']=="take"){   // lampe nehmen     output("`nDu steckst die Lampe einfach ein und läßt den `@Waldgeist`0 dort schweben     wo er jetzt schwebt.`n");     switch(e_rand(1,6)){          case 1:          case 2:          case 3:          output("`nDer `@Waldgeist`0 ist froh, dass du sein Gefängnis mitgenommen hast          und schenkt dir zum Dank 2 Kämpfe.");          $session['user']['turns']+=2;          break;          case 4:          case 5:          case 6:          output("`nObwohl der `@Waldgeist`0 lange in dieser Öllampe eingesperrt war, ist          es doch sein Zuhause geworden. Er ist wirklich alles andere als begeistert,          dass du die Lampe einsteckst und nimmt dir aus Rache 2 Kämpfe.");          $session['user']['turns']-=2;          break;     }     $session['user']['specialinc']="";}else if ($_GET['ups']=="cage"){   // geist einschliessen     output("`nAls der `@Waldgeist`0 bemerkt, dass du ihn wieder einsperren willst,     verflucht er Dich noch schnell bevor Du ihn zurück in die Öllampe steckst und     den Verschluß wieder sicher anbringst.`n     `@Sein Fluch haftet Dir heute trotzdem an.`0");          $session['bufflist']['aladin'] = array("name"=>"`@Fluch des Waldgeistes",                                                            "rounds"=>50,                                                            "wearoff"=>"`#Der Waldgeist hat dir verziehen.",                                                            "atkmod"=>0.8,                                                            "roundmsg"=>"Du musst an den Waldgeist denken und bist abgelenkt.",                                                            "activate"=>"offense");     $session['user']['specialinc']="";}else if ($_GET['ups']=="leave"){   // einfach weitergehen     output("`nDir wird es zu unheimlich. Du nimmst die Beine in die Hand und rennst zurück zum Weg.");     $session['user']['specialinc']="";     $session['user']['reputation']-=1;}

