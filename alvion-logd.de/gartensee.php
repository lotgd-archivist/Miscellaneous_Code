
<?php/*********************************                               **  Der Gartensee                **  by Lestat @ www.logdwelt.de  **  Texte by Akasha              **  04.Februar 2006              **                               **  lestat@fahr-zur-hoelle.org   **                               **********************************Ein kleiner See, der vom Garten aus erreicht werden kann, und an dem der Spieler spazieren gehen können.Inspiriert von einigen anderen Skripten, aber komplett selbst geschrieben.EINBAU:"""""""1)  Datenbank ändern:    ALTER TABLE `accounts` ADD `gartensee` enum('0','1') DEFAULT '0' NOT NULL;2)  gartensee.php in der gardens.php verlinken. als Beispiel:    suche:      addnav("Geschenkeladen","newgiftshop.php");    füge danach ein:      addnav("See","gartensee.php");3)  öffne newday.php    suche:      $session['user']['seenbard'] = 0;    füge danach ein:      $session['user']['gartensee']='0';*/require_once "common.php";require_once "func/fightnav.php";page_header("Der Gartensee");$session['user']['standort']="Am Gartensee";switch($_GET['op']){    case '':        addcommentary();        output("`c`b`@De`gr G`Ga`er`Gte`gns`@ee`b`n`n");        output("<img src='./images/gartensee.gif'>`n`n`n`c",true);        output("`eDu schlend`Gerst den Fluss ent`glang, in den hintere`@n Bereich des Gartens, un`gd kommst irgendwann an e`Gin verziertes und von Kletter`epflanzen überwuchertes Ga`Grtentor.  ");        output("Sobald du du`grch das Tor tri`@ttst, erstreckt sich vor d`gir eine wunderschöne, weite La`Gndschaft mit einem ries`eigen See, in den der Fluss m`Gündet. ");        output("Um den v`gorderen Bereich d`@es Sees verlä`guft ein schöner W`eeg, welcher mit Bänk`Gen gesäumt ist. ");        output("Das Was`gser glitzert he`@rrlich und lädt zu`gm Schwimm`Gen ein.`n");        output("Doch weiter im Hin`etergrund gibt es a`Guch unerforschte Ge`gbiete. Eine kleine, übe`@rwucherte Insel mitt`gen im See zieht dei`Gne Aufmerksamkeit auf si`ech und macht dich neug`Gierg, was es wohl all`ges darauf zu entdecken gib`@t. ");        output("Der Großteil des Se`ges wird vom Wald umg`Grenzt. Sofort ermahn`est du dich selber, dich n`Gicht zu weit vom vorder`gen Bereich zu entfernen, we`@nn du nicht auf Gefa`ghren stoßen willst.`n`n`n");        // if($session['user']['rp_only']=='0')        addnav("Spazieren gehen","gartensee.php?op=gehen");        addnav("Zurück zum Garten","gardens.php");        addnav("Zurück zum Dorf","village.php");        viewcommentary("gartensee","Hinzufügen",25,"sagt",1,1);        break;    case 'gehen':        output("`c`b`9Spaziergang am See`c`b`n`n");        if ($session['user']['gartensee']=='0'){            $session['user']['gartensee']='1';            output("`6Du gehst um den See spazieren und geniesst den schönen Ausblick.`n");            addnav("Weitergehen","gartensee.php?op=event");        }        else{            output("Also auf 2 Spaziergänge an einem Tag hast du wirklich keine Lust.`n");            addnav("Zurück zum Garten","gardens.php");        }        break;    case 'event':        switch(e_rand(1,9)){            case 1:                output("`c`b`9Bank`c`b`n`n");                output("`tDu kommst an eine der vielen Bänke um den See. ");                output("Was möchtest du tun?");                addnav("Hinsetzen","gartensee.php?op=bank");                addnav("Weitergehen","gartensee.php?op=weitergehen");                break;            case 2:                output("`c`b`9Bucht`c`b`n`n");                output("`#Wie du so den Weg entlang läufst, kommst du an eine, zum schwimmen einladende, Bucht. ");                output("Traust du dich ins Wasser, oder hast du zu viel Angst vor möglichen Gefahren?`n");                addnav("Schwimmen","gartensee.php?op=schwimmen");                addnav("Weitergehen","gartensee.php?op=weitergehen");                break;            case 3:                output("`c`b`9Boot`c`b`n`n");                output("`8Was ist denn das? Du entdeckst am Ufer, halb vom Schilf verdeckt, ein etwas mitgenommen aussehendes, kleines Ruderboot.`n`n");                output("`gOb das Ding noch seetüchtig genug ist, um mich sicher zur Insel zu bringen?");                addnav("Ich versuchs!","gartensee.php?op=boot");                addnav("Weitergehen","gartensee.php?op=weitergehen");                break;            case 4:                output("`c`b`9Baum des Lebens`c`b`n`n");                output("`qWährend deines Spaziergangs entdeckst du einen prachtvollen Baum. ");                output("Die Äste biegen sich unter der Last der großen herrlichen Früchte, die an ihm wachsen.`n");                addnav("Frucht pflücken","gartensee.php?op=baum");                addnav("Weitergehen","gartensee.php?op=weitergehen");                break;            case 5:                output("`c`b`9Seeungeheuer`c`b`n`n");                output("`2Nessie, nicht Nessie? Ist ja auch egal - ein schnaubendes Seeungeheuer greift dich an!");                addnav("Attacke!","gartensee.php?op=ungeheuer");                break;            case 6:                output("`c`b`9Fee`c`b`n`n");                output("`5Du begegnest einer Fee. Sie verlangt einen Edelstein von dir. Was machst du?");                if($session['user']['gems']==0){                    output("`%Du zeigst der Fee deine leeren Taschen, und sie lässt dich weiter ziehen.`n");                    addnav("Zurück zum See","gartensee.php");                }                else{                    addnav("Gib ihr Einen","gartensee.php?op=feeja");                    addnav("Gib ihr Keinen","gartensee.php?op=feenein");                }                break;            case 7:                output("`c`b`9Alter Mann`c`b`n`n");                output("`6Dir kommt ein alter Mann entgegen. Er trägt auch noch einen Stock bei sich. `^Ist das nicht etwa der aus dem Wald? ");                output("`6Langsam läufst du auf ihn zu. `^Doch! Das ist er. Aber welcher? Der mit dem schönen, oder der mit dem hässlichen Stock? ");                output("`6Während du noch überlegst, hat dich der Alte schon erreicht und holt zum Schlag aus. Hin- und hergerissen, ob du deinen ");                output("Kopf hinhalten, oder dich ducken sollst, zappelst du ziemlich dämlich aussehend vor dem Alten rum.`n`n");                output("Ein dumpfer Schmerz verrät dir aber, dass der Alte dir die Entscheidung schon abgenommen hat.");                switch(e_rand(1,2)){                    case 1:                        output("`6Du kannst es schon fühlen, dich hat der hässliche Stock erwischt. ");                        output("Grummelnd, den Kopf reibend und den Alten verfluchend gehst du davon.`n`n");                        output("`^Du verlierst einen Charmepunkt!");                        $session['user']['charm']--;                        break;                    case 2:                        output("`^Aua! `6Scheinbar muss, wer schön sein will, wirklich leiden.`n`n`^Du erhältst einen Charmepunkt!");                        $session['user']['charm']++;                        break;                }                addnav("Zurück zum See","gartensee.php");                break;            case 8:                output("`c`b`9Verlaufen`c`b`n`n");                output("`2Schon peinlich, aber wahr. Du hast es tatsächlich geschafft dich im Garten zu verlaufen! ");                output("Dir ist das ganze so peinlich, dass du dir wünscht, du wärst tot.`n`n ");                output("`@Das bist du dann auch fast, als du endlich wieder den Weg zurück findest.");                if($session['user']['rp_only']=='0')    $session['user']['hitpoints']=1;                else $session['user']['turns']=0;                addnav("Zurück zum See","gartensee.php");                break;            case 9:                output("`c`b`9Götter`c`b`n`n");                output("`#Ein heller Lichtstrahl scheint auf dich nieder. Eine göttliche Stimme erklingt: ");                output("`&Lange schon beobachte ich dich. Du schlenderst im Garten umher und willst ein Held sein? ");                output("Geh lieber in den Wald und erschlage ein paar Monster!");                output("`n`n`^Du erhälst 5 Waldkämpfe!");                $session['user']['turns']+=5;                addnav("Zurück zum See","gartensee.php");                break;        }        break;    case 'weitergehen':        output("`c`b`9Spaziergang am See`c`b`n`n");        output("`6Du setzt deinen Weg fort.`n");        addnav("Weitergehen","gartensee.php?op=event");        break;    case 'bank':        output("`c`b`9Bank`c`b`n`n");        switch(e_rand(1,6)){            case 1:                output("`tDu möchtest dich gerade setzen, da fällt dir ein Glitzern unter der Bank auf.`n`n");                output("Als du nachsiehst was da ist, findest du `^2 Edelsteine!");                $session['user']['gems']+=2;                addnav("Zurück zum See","gartensee.php");                break;            case 2:            case 3:                output("`tDu setzt dich auf die grobe Holzbank, und spürst einen stechenden Schmerz.`n`n");                output("Beim setzen hast du dich an einen großen Holzspreissel verletzt, und verlierst ".round($session['user']['hitpoints']*0.1)." Lebenspunkte.`n");                $session['user']['hitpoints']*=0.9;                addnav("Zurück zum See","gartensee.php");                break;            case 4:            case 5:                $goldfund=(e_rand(100,400));                output("`tDu setzt dich, als du plötzlich etwas hartes spürst. ");                output("Scheinbar hat da jemand seinen Goldbeutel verloren.");                output("`^Du findest ".$goldfund." Gold.");                $session['user']['gold']+=$goldfund;                addnav("Zurück zum See","gartensee.php");                break;            case 6:                output("`tDu gehst auf die Bank zu, und rutscht plötzlich aus. ");                output("Dein Kopf knallt gegen die Bank, aber ausser dass du an Erinnerung verlierst, verletzt du dich nicht.`n`n");                    if($session['user']['rp_only']=='0'){                    output("`^Du verlierst ".round($session['user']['experience']*0.03)." Erfahrungspunkte.`n`n");                    $session['user']['experience']*=0.97;                } else {                    output("`^Du verlierst 2 Donation-Punkte.`n`n");                    $session['user']['donation']-=2;                }                output("`tDu denkst dir noch: `@\"Hoffentlich hat das niemand gesehen.\"`t und gehst eilig davon.`n");                addnews("`2".$session['user']['name']."`2 hat sich beim hinsetzen auf eine Bank mächtig die Rübe gestossen.");                addnav("Zurück zum See","gartensee.php");                break;        }        break;    case 'schwimmen':        output("`c`b`9Bucht`c`b`n`n");            switch(e_rand(1,3)){                case 1:                    output("`#Wieso versuchst du es überhaupt? Etwa vergessen, dass du `bgar nicht`b schwimmen kannst?`n`n");                    output("`^Du bist ertrunken!`n");                    $session['user']['alive']=0;                    $session['user']['hitpoints']=0;                    addnews("`2".$session['user']['name']."`2 hat vergessen, dass ".($session['user']['sex']?'sie':'er')." Nichtschwimmer ist.");                    addnav("Tägliche News","news.php");                    break;                case 2:                        if($session['user']['rp_only']=='0'){                        output("`#Eine reizende Nixe segnet dich.`n`n");                        output("`^Du hast für die nächsten 30 Runden einen stärkeren Angriff!`n");                        $session[bufflist]['Segen der Nixe'] = array("name"=>"`9Segen der Nixe","rounds"=>30,"wearoff"=>"Die Kraft der Nixe verlässt dich.`0","defmod"=>1,"atkmod"=>1.1,"minioncount"=>1,"mingoodguydamage"=>3,"maxgoodguydamage"=>$session['user']['level'],"roundmsg"=>"Du fühlst den Segen der Nixe und schlägst härter zu.`0","activate"=>"offense");                        addnav("Zurück zum See","gartensee.php");                    } else {                        output("`#Eine reizende Nixe segnet dich.`n`n");                        output("`^Du bekommst Donation-Punkte hinzu!`n");                        $session['user']['donation']+=5;                        addnav("Zurück zum See","gartensee.php");                    }                    break;                case 3:                    output("`#Du fühlst dich sauberer und gestärkt.`n`n");                    output("`^Du bist attraktiver und erhälst 2 Charmepunkte!`n");                    $session['user']['charm']+=2;                    addnav("Zurück zum See","gartensee.php");                    break;            }            break;    case 'boot':        output("`c`b`9Boot`c`b`n`n");        switch(e_rand(1,7)){            case 1:                output("`@\"Vielleicht ist das Boot doch nicht ganz dicht?!\" `6denkst du dir, als dir das Wasser schon bis zu den Waden steht.`n`n");                output("`^Du bist ertrunken!`n");                $session['user']['alive']=0;                $session['user']['hitpoints']=0;                addnav("Tägliche News","news.php");                break;            case 2:            case 3:                if($session['user']['rp_only']=='0'){                    output("`@\"Vielleicht ist das Boot doch nicht ganz dicht?!\" `6denkst du dir, als dir das Wasser schon bis zu den Waden steht.`n");                    output("Halb tot erreichst du das Ufer.`n`n");                    output("`^Du hast die Hälfte deiner Lebenspunkte verloren!");                    $session['user']['hitpoints']*=0.5;                    addnav("Zurück zum See","gartensee.php");                } else {                    output("`@\"Vielleicht ist das Boot doch nicht ganz dicht?!\" `6denkst du dir, als dir das Wasser schon bis zu den Waden steht.`n");                    output("Halb tot erreichst du das Ufer.`n`n");                    output("`^Du hast die Hälfte deiner Runden verloren!");                    $session['user']['turns']=round($session['user']['turns']*0.5);                    addnav("Zurück zum See","gartensee.php");                }                break;            case 4:            case 5:                output("`6Ein heftiger Sturm zwingt dich ans Ufer zurück.`n`n");                output("Deine Frisur ist zerstört. `^Du verlierst 2 Charmepunkte!`n");                $session['user']['charm']-=2;                addnav("Zurück zum See","gartensee.php");                break;            case 6:                $gold=e_rand(5000,10000);                output("`6Erschöpft aber glücklich erreichst du die Insel. Auf deiner Entdeckungstour findest du einen Schatz.`n`n");                output("`^Du findest ".$gold." Goldmünzen!");                $session['user']['gold']+=$gold;                addnav("Zurück zum See","gartensee.php");                break;            case 7:                $steine=e_rand(3,6);                output("`6Erschöpft aber glücklich erreichst du die Insel. Auf deiner Entdeckungstour findest du einen Schatz.`n`n");                output("`^Du findest ".$steine." Edelsteine!");                $session['user']['gems']+=$steine;                addnav("Zurück zum See","gartensee.php");                break;        }        break;    case 'baum':        output("`c`b`9Baum des Lebens`c`b`n`n");        switch(e_rand(1,10)){            case 1:                output("`qAls du dich dem Baum näherst stolperst du über eine Wurzel und schlägst mit dem Kopf auf einem spitzen Stein auf.`n`n");                output("`^Du überlebst nur knapp.`n");                $session['user']['hitpoints']=1;                addnav("Zurück zum See","gartensee.php");                break;            case 2:                output("`qDu möchtest gerade eine Frucht pflücken, als dir ein Glitzern am Boden auffällt.`n`n");                output("`^Du findest einen Edelstein!`n`n");                output("`6Vor lauter Freude über deinen Fund vergisst du den Baum und gehst weiter.`n");                $session['user']['gems']++;                addnav("Zurück zum See","gartensee.php");                break;            case 3:                output("`qDu pflückst eine Frucht und beisst herzhaft hinein. ");                output("Leider schmeckt sie sehr bitter.`n`n");                if($session['user']['rp_only']=='0'){                    output("`^Du fühlst dich schwächer. `qDie Frucht war wohl giftig.");                    $session['user']['hitpoints']*=0.9;                } else {                    output("`^Du verlierst 2 Runden. `qDie Frucht war wohl giftig.");                    $session['user']['turns']-=2;                }                addnav("Zurück zum See","gartensee.php");                break;            case 4:                output("`qDu pflückst eine Frucht und beisst herzhaft hinein. ");                output("Leider schmeckt sie sehr bitter.`n`n");                output("`^Von diesem Ding wird dir noch eine ganze Weile schlecht sein.`n");                if($session['user']['rp_only']=='0')    $session[bufflist]['Übelkeit'] = array("name"=>"`@Übelkeit","rounds"=>20,"wearoff"=>"Endlich gehts dir besser.`0","defmod"=>0.9,"atkmod"=>0.9,"minioncount"=>1,"mingoodguydamage"=>3,"maxgoodguydamage"=>$session['user']['level'],"roundmsg"=>"Die blöde Frucht fährt dir immer noch im Bauch herum.`0","activate"=>"offense");                addnav("Zurück zum See","gartensee.php");                break;            case 5:                output("`qDu pflückst eine Frucht und beisst herzhaft hinein. ");                output("Sie schmeckt wunderbar süß.`n`n");                if($session['user']['rp_only']=='0'){                    output("Durch deine gesunde Ernährung wirst du länger Leben. `^Du gewinnst einen `bpermanenten`b Lebenspunkt!");                    $session['user']['maxhitpoints']++;                    $session['user']['hitpoints']++;                } else {                    output("Durch deine gesunde Ernährung wirst du SCHÖNER. `^Du gewinnst einen Charmepunkt!");                    $session['user']['charm']++;                }                addnav("Zurück zum See","gartensee.php");                break;            case 6:                output("`qDu pflückst eine Frucht und beisst herzhaft hinein. ");                output("Sie schmeckt wunderbar süß.`n`n");                output("Du fühlst dich erfrischt. `^Du erhälst 2 Waldkämpfe!");                $session['user']['turns']+=2;                addnav("Zurück zum See","gartensee.php");                break;            case 7:                output("`qDu pflückst eine Frucht und beisst herzhaft hinein. ");                output("Sie schmeckt wunderbar süß.`n");                output("Als so-gut-wie Vegetarier bist du jetzt so richtig Sexy. ;)`n`n");                output("`^Du erhälst zwei Charmepunkte!`n");                $session['user']['charm']+=2;                addnav("Zurück zum See","gartensee.php");                break;            case 8:                output("`qDu pflückst eine Frucht und beisst herzhaft hinein. ");                output("Sie schmeckt wunderbar süß.`n`n");                output("Du fühlst dich gestärkt. `^Deine Lebenspunkte werden vollständig aufgefüllt.`n");                $session['user']['hitpoints']=$session['user']['maxhitpoints'];                addnav("Zurück zum See","gartensee.php");                break;            case 9:                if ($session['user']['gems']>0){                    output("`qDu streckst dich nach einer Frucht, da stürzt sich plötzlich das Äffchen aus dem Wald auf dich und klaut dir einen Edelstein.`n`n");                    output("Der Ärger darüber verdirbt dir den Appetit.");                    $session['user']['gems']--;                }else{                    output("`qDu streckst dich nach einer Frucht, da stürzt sich plötzlich das Äffchen aus dem Wald auf dich.`n`n");                    output("`^Hättest du nun Edelsteine bei dir, dann hätte es dir einen geklaut.`n");                    output("`qDurch die Ablenkung vergisst du ganz, dass du eine Frucht wolltest.");                }                addnav("Zurück zum See","gartensee.php");                break;            case 10:                $gold=e_rand(1000,3000);                output("`qDu pflückst eine Frucht und als du gerade hineinbeissen willst, bemerkst du, sie ist ein einzelner riesiger Diamant. ");                output("Gerade als du darüber sinnierst wie unheimlich wertvoll dieser Diamant wohl ist kommt ein Händler vorbeigerauscht, entreisst den Diamant deinen Händen und drückt dir dafür ".$gold." Gold hinein.");                output("Ungläubig schaust du ihm hinterher.");                $session['user']['gold']+=$gold;                addnav("Zurück zum See","gartensee.php");                break;        }        break;    case 'feeja':        output("`c`b`9Fee`c`b`n`n");        $session['user']['gems']--;        switch(e_rand(1,5)){            case 1:            case 2:            case 3:                output("`%Die Arme hat in Wirtschaftslehre nicht sonderlich gut aufgepasst. Sie gibt dir zum Dank `^2 Edelsteine!");                $session['user']['gems']+=2;                break;            case 4:            case 5:                output("`5Dankeschön!`t ist ihre Antwort, und sie schwirrt davon.");                break;        }        addnav("Zurück zum See","gartensee.php");        break;    case 'feenein':        output("`c`b`9Fee`c`b`n`n");        output("`5Na dann halt nicht! `tschmollt sie dich an und flattert wütend davon.");        addnav("Zurück zum See","gartensee.php");        break;    case 'ungeheuer':      output("`c`b`9Seeungeheuer`c`b`n`n");                if($session['user']['rp_only']=='0'){                    $badguy = array(                        "creaturename"=>"Seeungeheuer",                        "creaturelevel"=>$session['user']['level'],                        "creatureweapon"=>"Scharfe Zähne",                        "creatureattack"=>round($session['user']['attack']*0.75),                        "creaturedefense"=>round($session['user']['defence']*0.75),                        "creaturehealth"=>round($session['user']['maxhitpoints']*1.5),                        "diddamage"=>0);                    $session['user']['badguy']=createstring($badguy);                    $battle=true;                }else{                    addnews("`%".$session[user][name]."`5 wurde von einem Seeungeheuer gefressen.");                    $session[user][alive]=false;                    $session[user][hitpoints]=0;                    addnav("Zu den News","news.php");                }                break;    case 'fight':        $battle=true;        break;}if ($battle){  include("battle.php");    if($victory){      addnav("Zurück zum See","gartensee.php");      $wonexp=round($session['user']['experience']*0.07);      if($wonexp<100){        $wonexp=round(e_rand(100,120));      }      else{}      output("`$`n`cDu hast gewonnen!`c`n");      output("`9Ein paar verschreckte Nixen tauchen auf, feiern dich und bedanken sich ganz herzlich bei dir.`n`n");      output("`^Du erhälst ".$wonexp." Erfahrungspunkte!");      $session['user']['experience']+=$wonexp;      $badguy=array();      $session['user']['badguy']="";    }    elseif($defeat){        addnav("Tägliche News","news.php");        output("`n`$`cDu hast verloren!`c`n");        $session[user][alive]=false;        $session[user][hitpoints]=0;        addnews("`%".$session[user][name]."`5 wurde von einem Seeungeheuer gefressen.");        $badguy=array();        $session['user']['badguy'] = createstring($badguy);    }    else{        fightnav(true,false);    }}page_footer();

