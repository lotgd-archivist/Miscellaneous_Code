
<?php///////////////////////////////////////////////////////////////////////////////// Specialname: Der Regenbogen// code: Opal// Idee & Text : Awon eine Userin von www.Aladrion.de     //// Fehlerbeseitigung, Codeoptimierung und Anpassungen:// Linus für die Berge von Alvion in 05/2011// alvion-logd.de/logd//////////////////////////////////////////////////////////////////////////////if (!isset($session)) exit();$filename = basename(__FILE__);$spi = ($session['user']['specialinc']=$filename);$fn = "berge.php";$zurueck="Zurück zum Bergpfad";$ende=FALSE;$out="`n";switch ($_GET['op']){    case "truhe":        $session['user']['specialinc']="";        $out.="`&Natürlich willst du nun den Schatz sehen und haben, der sich dort drin befinden mag und so schlägst du ohne zu zögern "            ."mit deiner Waffe das Schloss ab und öffnest die Truhe.`n";        if ($session['user']['turns']>=3){            $session['user']['turns']-=3;        }else{            $session['user']['turns']=0;        }        switch(e_rand(1,12)){            case '2':                $out.="Plötzlich springt ein `@grün gekleideter Kobold`& mit `\$rotem Bart`& aus der Truhe und greift dich obszön fluchend, mit "                    ."irischer Butter, an. Du verlierst fast alle deine Lebenspunkte. Das Geschehen brachte dir jedoch 5% Erfahrung.`n`n";                $session['user']['experience']=floor($session['user']['experience']*1.05);                $session['user']['hitpoints']=ceil($session['user']['hitpoints']*0.1);                if($session['user']['hitpoints']<1) $session['user']['hitpoints']=1;                addnews($session['user']['name']."`& wurde für einen Diebstahl an einem Kobold bestraft. `^„Tja, das geschieht dir jetzt aber Recht!“`&, spottet der Kobold.");                $ende=TRUE;            break;                case '11':                $out.="Plötzlich springt ein `@grün gekleideter Kobold`& mit `\$rotem Bart`& aus der Truhe und greift dich obszön fluchend, mit "                    ."irischer Butter, an.`n`4Du bist tot!. Du kannst morgen weiter spielen!`n`&Das Geschehen brachte dir jedoch 10% Erfahrung.`n`n";                $session['user']['experience']=floor($session['user']['experience']*1.1);                $session['user']['hitpoints']=0;                $session['user']['alive']=0;                addnews($session['user']['name']."`& wurde für einen Diebstahl an einem Kobold bestraft. `^„Tja, das geschieht dir jetzt aber Recht!“`&, spottet der Kobold.");                addnav("Zu den News","news.php");            break;                default:                $gold=mt_rand(100,5500);                $gems=mt_rand(5,10);                $runden=mt_rand(3,6);                $out.="In der Truhe, zu der dich der Regenbogen führte, befindet sich ein wahrer Schatz. Du findest $gems Edelsteine "                    ."und $gold Goldstücke!`nAußer dem findest du einen Trank, der dich $runden Runden länger kämpfen lässt.`n`n";                $session['user']['gold']+=$gold;                $session['user']['gems']+=$gems;                $session['user']['turns']+=$runden;                addnews($session['user']['name']." `&fand am Ende des Regenbogens einen Schatz");                $ende=TRUE;            break;        }    break;    case "lassen":        $session['user']['specialinc']="";        $out.="`&Nachdem du dir das Schloss angesehen hast schüttelst du deprimiert den Kopf und gehst von dannen. Ein "            ."andermal, sagst du dir. Drehst dich um und verschwindest im Gebirge. Allerdings verlierst du weitere drei "            ."Runden, da es lange dauerte die Truhe aus zu graben!`n`n";        addnews($session['user']['name']." `&wagt nicht eine Schatztruhe am Ende des Regenbogens zu öffnen");        if ($session['user']['turns']>=3){            $session['user']['turns']-=3;        }else{            $session['user']['turns']=0;        }        $ende=TRUE;    break;    case "graben":        $spi;        $out.="`&Du überwindest deine Vorsicht und fängst fast augenblicklich an zu graben. Bis hier her hast du bereits drei "            ."Runden verbraucht, da dein Weg bis zum Ende des Regenbogens lang war, und es wird noch länger dauern den Schatz "            ."zu finden!`nDu willst schon fast aufgeben als plötzlich ein dumpfes „Klong“ erklingt. Voll von frischem Elan "            ."gräbst du weiter und ziehst eine schwere ebenholzfarbene Truhe aus dem Loch. Du springst jubelnd auf und freust "            ."dich, dass es dir geglückt ist den Schatz zu heben.`n`n";        if ($session['user']['turns']>=3){            $session['user']['turns']-=3;        }else{            $session['user']['turns']=0;        }        addnav("Schatztruhe öffnen",$fn."?op=truhe");        addnav("Es Lassen",$fn."?op=lassen");    break;    case "fliehen":        $session['user']['specialinc']="";        $out.="`&Da du nun das Ende des Regenbogens erblickst wird dir doch recht mulmig, da du stets geglaubt hast man könne "            ."das Ende niemals erreichen. Durch dein Misstrauen skeptisch geworden drehst du dich um und verschwindest in den "            ."Bergen. Allerdings verlierst du drei Runden, da dein Weg hierher lang war!`n`n";        addnews($session['user']['name']." `&flieht vor einem Regenbogen");        if ($session['user']['turns']>=3){            $session['user']['turns']-=3;        }else{            $session['user']['turns']=0;        }        $ende=TRUE;        break;    case "story":        $spi;        $out.="`&Da Neugier, gepaart mit Endeckungsgeist, dich packt begibst du dich auf die Suche nach dem Ende des "            ."Regenbogens. Nach einer geraumen Zeit erreichst du tatsächlich das sehnlich erwartete Ende des Farbenspiels.`n`n";        addnav("Graben",$fn."?op=graben");        addnav($zurueck,$fn."?op=fliehen");    break;    case "wald":        $session['user']['specialinc']="";        $out.="`&Du schenkst dem Regenbogen nicht viel Aufmerksamkeit, da du wegen dem Regen leise vor dich hin fluchst. Bald"            ." schon hast du den Regenbogen hinter dir gelassen und widmest dich anderen Aufgaben.`n`n";        $ende=TRUE;    break;    default:        $spi;        $out.="`&Ein leichter Nieselregen begleitet deine Schritte über den Bergweg und als du deinen Blick gen Himmel richtest"            ." bemerkst du wie die Wolken trotz des beständigen Regens aufbrechen und die Sonne sich zaghaft hervorwagt. "            ."Als ihre Strahlen sich mit den Regentropfen vereinen entsteht ein Regenbogen. Da auch du schon mal davon gehört "            ."hast, dass am Ende eines Regenbogens ein Schatz vergraben liegt überlegst du, ob du dich auf die Suche danach "            ."machen solltest.`n`n";        addnav("Suchen",$fn."?op=story");        addnav($zurueck,$fn."?op=wald");    break;}output($out);if($ende==TRUE) berge(true);

