
<?/* idea of gargamel @ www.rabenthal.de * * modifications by  bibir (logd_bibir@email.de) *               and Chaosmaker (webmaster@chaosonline.de) *               for http://logd.chaosonline.de * * details: * (16.08.04) $session[user][specialinc] = "ambusher.php"; => $session[user][specialinc] = "special/ambusher.php"; * (18.08.04) gems are not lost any more if player dies; reduced spirit if player pays fee * * 02.10.2011 reduced reputation if player pays fee, by Linus for http://www.alvion-logd.de/logd/ * 02.10.2011 $session[user][specialinc] = "special/ambusher.php"; => $session['user']['specialinc'] = "ambusher.php";, by Linus for http://www.alvion-logd.de/logd/ * */if (!isset($session)) exit();if ($_GET['op']==""){    output("`nZwei merkwürdige Gesellen versperren dir den Weg. Als sie dich anbrüllen,    schlägt dir ihr fauliger Atem entgegen. \"Du willst durch unser Gebiet, das kostet!\"    herrschen sie dich an.`n`0");    if ( $session['user']['gold'] < 100 ) {        output("\"Aber du bist ja eine arme Wurst, da darfst du umsonst passieren\"        bieten sie dir großzügig an.`n        Du vermeidest weitere Diskussionen und nimmst die Beine in die Hand.`0");    }    else {        output("Mit einem fiesen Grinsen verlangen sie `Q10%`0 deines Goldes als Zoll.`0");        addnav("Wegezoll zahlen","berge.php?op=pay");        addnav("Kämpfen","berge.php?op=fight");        $session['user']['specialinc'] = "ambusher.php";    }}else if ($_GET['op']=="pay"){    output("`nDu gibst den Spießgesellen das geforderte Gold und sie lassen dich    tatsächlich passieren.`n    Schlecht gelaunt ziehst Du weiter.`0");    $weg = round($session['user']['gold']*0.1);    $session['user']['gold']-= $weg;    $session['user']['specialinc'] = "";    $session['user']['reputation']--;}else if ($_GET['op']=="fight"){    $chance = mt_rand(1,100);    if ( $chance < 70 ) {        output("`nDu zückst deine Waffe und greifst die Typen an. Die beiden haben        sich offenbar nur stark geredet, denn an der Waffe versagen sie jämmerlich.`n");        $reward=e_rand($session['user']['experience']*0.02, $session['user']['experience']*0.05);        $reward+=10;        output("`@Du streckst die Wegelagerer nieder und bekommst $reward Erfahrungspunkte.`0");        $session['user']['experience']+=$reward;    }    elseif ( $chance > 80 ) {        output("`nTapfer kämpfst du gegen die Typen, aber sie sind stärker als du        dachtest. Um dein Leben zu schonen, musst du nun `Qdein ganzes Gold herausgeben`0.`n        Geschlagen machst du dich wieder auf den Weg.`0");        $session['user']['gold']=0;    }    else {        output("Es war sicher nicht deine beste Entscheidung, die beiden Typen zum        Kampf zu fordern. Wütend schlagen sie auf dich ein und besiegen dich mit        Leichtigkeit. In ihrer Wut finden sie kein Ende und bringen dich um.`n        `!Für deinen Mut wird dich jedoch Ramius belohnen.`0");        $session['user']['alive']=false;        $session['user']['gold']=0;        $session['user']['hitpoints']=0;        $session['user']['gravefights']++;        addnews("`^".$session['user']['name']."`@ wollte den Wegezoll sparen. Nun sind Gold und Leben futsch!");        addnav("Tägliche News","news.php");    }    $session['user']['specialinc'] = "";}

