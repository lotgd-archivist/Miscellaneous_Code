
<?php// 20060401// Idee und Umsetzung // Morpheus aka Apollon // 2006 für logd.at(LoGD 0.9.7 +jt ext (GER) 3) // Mail to Morpheus@magic.ms or Apollon@magic.ms // gewidmet meiner über alles geliebten Blume // Funktion entnommen aus der inn.php// Dank an Anpera für seine Unterstützung bei diesm Modulrequire_once("common.php"); page_header("Tempel der Artemis"); $session['user']['standort']="Das Kloster";if ($_GET['op']=="gems"){    if ($_POST['gemcount']==""){       output("\"`2Nun, für deine Edelsteine kann ich Dir einen magischen Trank brauen, je mehr du mir gibst, desto stärker wird er sein. Der Grundtrank kostet 2 Edelsteine.`0\"");       output("`n`nWieviele Edelsteine gibst du ihm?");       output("<form action='artemistempel.php?op=gems' method='POST'><input name='gemcount' value='0'><input type='submit' class='button' value='Weggeben'>`n",true);       output("`nUnd welche Gunst erhoffst du dir von der Göttin dafür?`n`n<input type='radio' name='wish' value='1' checked> Charme`n",true);            if($session['user']['rp_only']==0) {          output("<input type='radio' name='wish' value='2'> Lebenskraft`n",true);           output("<input type='radio' name='wish' value='3'> Gesundheit`n",true);        }      output("<input type='radio' name='wish' value='4'> Ansehen</form>",true);       addnav("","artemistempel.php?op=gems");    }else{       $gemcount = abs((int)$_POST['gemcount']);       if ($gemcount>$session['user']['gems']){          output("Der Priester blickt dich an, schüttelt den Kopf und sagt lächelnd: \"`2Du hast nich so viele Edelsteine bei Dir, `bich fürchte, Du wirst noch welche besorgen müssen!`b`0\"");       }else{          output("`#Du platzierst $gemcount Edelsteine auf der Theke.");          if ($gemcount%2!=0){             output(" Der Priester lächelt milde, weil du ihm einen Edelstein zuviel gegeben hast, den er dir zwinkernd wieder zurück gibt.");             $gemcount-=1;          }          if ($gemcount>0){             output("Der Priester wendet sich zum Altar, mischt einen Trunk und überreicht dir die Schale, die du bis auf den letzten Tropfen leerst...`n`n");              $session['user']['gems']-=$gemcount;              //debuglog("used $gemcount gems on potions");             switch($_POST['wish']){                case 1:                $session['user']['charm']+=($gemcount*2);                output("`&Du fühlst dich charmant! `^(Du erhältst Charmepunkte)");                break;                case 2:                $session['user']['maxhitpoints']+=($gemcount);                $session['user']['hitpoints']+=($gemcount);                output("`&Du fühlst, wie neue Lebensenergie in dir wächst! `^(Deine maximale Lebensenergie erhöht sich permanent)");                break;                case 3:                if ($session['user']['hitpoints']<$session['user']['maxhitpoints']) $session['user']['hitpoints']=$session['user']['maxhitpoints'];                $session['user']['hitpoints']+=($gemcount*10);                output("`&Du fühlst, wie deine Gesundheit zu steigen scheint! `^(Du erhältst vorübergehend mehr Lebenspunkte)");                break;                case 4:                $session['user']['reputation']+=(($gemcount/2)*5);                output("`&Ein paar deiner Sünden wurden dir vergeben und dein Ansehen erhöht");                break;               default:               //catch cross scripting and cheating               output("`&Der Priester ist nicht amüsiert. Er informiert die Götter, die über dein weiteres Schicksal entscheiden werden.");               debuglog($session['user']['login']."übergab einen unmöglichen und ungültigen Wert in artemistempel.php");               break;             }          }else{             output("`n`nDu überlegst es dir anders, entschuldigst dich beim Priester und verabschiedest dich von ihm.");          }       }    }    addnav("Zurück zum Klosterhof","kloster.php"); }else{   output("`7`b`cTempel der Artemis`c`b");    output("`n<table align='center'><tr><td><IMG SRC=\"images/artemis.jpg\"></tr></td></table>`n",true);    output("`3Du betrittst eine recht große Tempelhalle, die hell und freundlich wirkt.");    output("`3Durch die großen, bunten Fenster in den Seiten dringt helles Sonnenlicht in den Tempel, an dessen Ende eine Statue der Artemis steht.`n");    output("`3Vor der Statue steht ein Altar, der mit Blumen geschmückt ist, die in allen Farben leuchten, und ein Priester ist grade dabei, sie mit Wasser zu versorgen.`n");    output("`3Als er dich bemerkt, stellt er seine Kanne bei Seite und wendet sich zu dir:`2Hallo ".$session['user']['name']."`2, sei herzlichen willkommen im Tempel der Artemis!");    output("`2Du möchtest also die Gnade der Göttin erflehen, auf dass sie dich stärke und deinem Leben mehr Glanz verleihe.`n");    output("`3Ehrfürchtig nickst du und der Priester lächelt:`2 Nun, das sollte kein Problem sein, so fern du bereit bist, der Göttin angemessen Opfer zu bringen.");    output("`2Ich hoffe, du besitzt auch Edelsteine, die du zu opfern bereit bist!?`n");    addnav("Ja, das will ich", "artemistempel.php?op=gems");    addnav("Verzeiht, lieber doch nicht", "kloster.php"); }page_footer(); ?>

